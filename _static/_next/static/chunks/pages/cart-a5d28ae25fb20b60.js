(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{7671:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return r(3122)}])},3122:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return g}});var a=r(7568),n=r(6042),s=r(9396),i=r(828),l=r(4051),c=r.n(l),d=r(5893),o=r(2425),u=r.n(o),_=r(5675),h=r.n(_),x=r(9473),p=r(7294),m=r(5021),j=r(9669),N=r.n(j),b=r(1163),f=r(1388),v=r(615),C=r.n(v),y=function(t){var e=t.total,r=t.createOrder,a=(0,p.useState)(""),n=a[0],s=a[1],i=(0,p.useState)(""),l=i[0],c=i[1];return(0,d.jsx)("div",{className:C().container,children:(0,d.jsxs)("div",{className:C().wrapper,children:[(0,d.jsxs)("h1",{className:C().title,children:["You will pay ",(0,d.jsxs)("b",{children:["\xa3",e]})," after delivery."]}),(0,d.jsxs)("div",{className:C().item,children:[(0,d.jsx)("label",{className:C().label,children:"Full Name"}),(0,d.jsx)("input",{placeholder:"Enter Name",type:"text",className:C().input,onChange:function(t){return s(t.target.value)}})]}),(0,d.jsxs)("div",{className:C().item,children:[(0,d.jsx)("label",{className:C().label,children:"Phone Number"}),(0,d.jsx)("input",{type:"text",placeholder:"Enter phone number",className:C().input})]}),(0,d.jsxs)("div",{className:C().item,children:[(0,d.jsx)("label",{className:C().label,children:"Address"}),(0,d.jsx)("textarea",{rows:5,placeholder:"Enter Address",type:"text",className:C().textarea,onChange:function(t){return c(t.target.value)}})]}),(0,d.jsx)("button",{className:C().button,onClick:function(){r({customer:n,address:l,total:e,method:0})},children:"Order"})]})})},g=function(){var t=(0,x.v9)((function(t){return t.cart})),e=(0,p.useState)(!1),r=e[0],l=e[1],o=(0,p.useState)(!1),_=o[0],j=o[1],v=t.total.toFixed(2),C={layout:"vertical"},g=(0,x.I0)(),T=(0,b.useRouter)(),w=function(){var t=(0,a.Z)(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N().post("https://delishhhapp.netlify.app/api/orders",e);case 3:201===(r=t.sent).status&&(g((0,f.mc)()),T.push("/orders/".concat(r.data._id))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),O=function(e){var r=e.currency,a=e.showSpinner,l=(0,i.Z)((0,m.Up)(),2),c=l[0],o=c.options,u=c.isPending,_=l[1];return(0,p.useEffect)((function(){_({type:"resetOptions",value:(0,s.Z)((0,n.Z)({},o),{currency:r})})}),[r,a]),(0,d.jsxs)(d.Fragment,{children:[a&&u&&(0,d.jsx)("div",{className:"spinner"}),(0,d.jsx)(m.ch,{style:C,disabled:!1,forceReRender:[v,r,C],fundingSource:void 0,createOrder:function(t,e){return e.order.create({purchase_units:[{amount:{currency_code:r,value:v}}]}).then((function(t){return t}))},onApprove:function(e,r){return r.order.capture().then((function(e){var r=e.purchase_units[0].shipping;w({customer:r.name.full_name,address:r.address.address_line_1,total:t.total.toFixed(2),method:1})}))}})]})};return(0,d.jsxs)("div",{className:u().container,children:[(0,d.jsx)("div",{className:u().left,children:(0,d.jsxs)("table",{className:u().table,children:[(0,d.jsx)("tbody",{children:(0,d.jsxs)("tr",{className:u().trTitle,children:[(0,d.jsx)("th",{children:"Product"}),(0,d.jsx)("th",{children:"Name"}),(0,d.jsx)("th",{children:"Extras"}),(0,d.jsx)("th",{children:"Price"}),(0,d.jsx)("th",{children:"Quantity"}),(0,d.jsx)("th",{children:"Total"})]})}),(0,d.jsx)("tbody",{children:t.products.map((function(t){return(0,d.jsxs)("tr",{className:u().tr,children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:u().imgContainer,children:(0,d.jsx)(h(),{src:t.img,layout:"fill",objectFit:"cover",alt:""})})}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:u().name,children:t.title})}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:u().extras,children:t.extras.map((function(t){return(0,d.jsxs)("span",{children:[t.text,", "]},t._id)}))})}),(0,d.jsx)("td",{children:(0,d.jsxs)("span",{className:u().price,children:["\xa3",t.price]})}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:u().quantity,children:t.quantity})}),(0,d.jsx)("td",{children:(0,d.jsxs)("span",{className:u().total,children:["\xa3",t.price*t.quantity]})})]},t._id)}))})]})}),(0,d.jsx)("div",{className:u().right,children:(0,d.jsxs)("div",{className:u().wrapper,children:[(0,d.jsx)("h2",{className:u().title,children:"CART TOTAL"}),(0,d.jsxs)("div",{className:u().totalText,children:[(0,d.jsx)("b",{className:u().totalTextTitle,children:"Subtotal:"}),"\xa3",t.total.toFixed(2)]}),(0,d.jsxs)("div",{className:u().totalText,children:[(0,d.jsx)("b",{className:u().totalTextTitle,children:"Discount:"}),"\xa30.00"]}),(0,d.jsxs)("div",{className:u().totalText,children:[(0,d.jsx)("b",{className:u().totalTextTitle,children:"Total:"}),"\xa3",t.total.toFixed(2)]}),r?(0,d.jsxs)("div",{className:u().paymentMethods,children:[(0,d.jsx)("button",{className:u().payButton,onClick:function(){return j(!0)},children:"CASH ON DELIVERY"}),(0,d.jsx)(m.Vv,{options:{"client-id":"AbHeGE0dng_DXtFBu7jbsDKGRusnFQbdqwcPUr0SiyGaXR9aGHGkzCgVl_J5bS47Opf-yLUCrnJJY-KN",components:"buttons",currency:"GBP","disable-funding":"credit,card,p24"},children:(0,d.jsx)(O,{currency:"GBP",showSpinner:!1})})]}):(0,d.jsx)("button",{onClick:function(){return l(!0)},className:u().button,children:"CHECKOUT NOW!"})]})}),_&&(0,d.jsx)(y,{total:t.total.toFixed(2),createOrder:w})]})}},2425:function(t){t.exports={container:"Cart_container__v66s_",paymentMethods:"Cart_paymentMethods__9ZXIb",payButton:"Cart_payButton__YuHP8",left:"Cart_left__uUdiV",right:"Cart_right__uQLkn",imgContainer:"Cart_imgContainer__X_0WK",table:"Cart_table__AtJ4d",name:"Cart_name__VSWCt",total:"Cart_total__e1x0z",wrapper:"Cart_wrapper__hwYiL",totalTextTitle:"Cart_totalTextTitle__5HC3q",button:"Cart_button__FRScP",trTitle:"Cart_trTitle__xPgd6",tr:"Cart_tr___K6pr",extras:"Cart_extras__B_Qbi",price:"Cart_price__JXkRc",quantity:"Cart_quantity__bbm6q",gradient:"Cart_gradient__gqOcU"}},615:function(t){t.exports={container:"OrderDetail_container__g8vBb",wrapper:"OrderDetail_wrapper__gA7AW",title:"OrderDetail_title__q5AD3",item:"OrderDetail_item__cNl_Y",label:"OrderDetail_label__Gy3tH",input:"OrderDetail_input__CwAn3",button:"OrderDetail_button__PS9u_"}}},function(t){t.O(0,[217,301,774,888,179],(function(){return e=7671,t(t.s=e);var e}));var e=t.O();_N_E=e}]);